name: Need for Speed: Porsche Unleashed
game_slug: need-for-speed-porsche-unleashed
version: CDROM
slug: need-for-speed-porsche-unleas-demo
runner: wine

script:
    files:
    - patch: 'N/A: Select the Patch Setup File (Need-for-Speed-Porsche-Unleashed_Patch_Win_EN_Patch-35.exe)'
    - widescreen: https://bitbucket.org/fk/porsche-graphics-hacks/downloads/nfspu-widescreen-1.0.1.zip
    game:
    exe: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
        Unleashed/Porsche.exe
    prefix: $GAMEDIR
    installer:
    - insert-disc:
        requires: AutoRun.exe
    - task:
        name: create_prefix
        prefix: $GAMEDIR
    - task:
        executable: $DISC/AutoRun.exe
        name: wineexec
        prefix: $GAMEDIR
    - task:
        executable: patch
        name: wineexec
        prefix: $GAMEDIR
    - extract:
        dst: $CACHE/NFSPU/Drivers/
        file: widescreen
    - execute:
        command: iconv -f utf-16le -t utf-8 "$CACHE/NFSPU/Drivers/Enable Direct3D 7 Renderer.reg"
        -o "$CACHE/NFSPU/Drivers/Enable Direct3D 7 Renderer.reg"
    - execute:
        command: iconv -f utf-16le -t utf-8 "$CACHE/NFSPU/Drivers/Enable Glide Renderer.reg"
        -o "$CACHE/NFSPU/Drivers/Enable Glide Renderer.reg"
    - execute:
        command: iconv -f utf-16le -t utf-8 "$CACHE/NFSPU/Drivers/Enable Widescreen Renderer.reg"
        -o "$CACHE/NFSPU/Drivers/Enable Widescreen Renderer.reg"
    - merge:
        dst: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
        Unleashed/Drivers/
        src: $CACHE/NFSPU/Drivers/
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\Software\Wow6432Node\Electronic Arts\Need For Speed - Porsche'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\Software\Wow6432Node\Electronic Arts\Need For Speed - Porsche'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Electronic Arts\Need For Speed - Porsche 2000'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Electronic Arts\Need For Speed - Porsche 2000'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Electronic Arts\Need For Speed - Porsche Unleashed'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Electronic Arts\Need For Speed - Porsche Unleashed'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche 2000'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche 2000'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche Unleashed'
        key: 'Thrash Driver'
        value: 'PorscheWidescreen'
        type: REG_SZ
        arch: win64
    - task:
        name: set_regedit
        prefix: $GAMEDIR
        path: 'HKEY_LOCAL_MACHINE\SOFTWARE\Electronic Arts\Need For Speed - Porsche Unleashed'
        key: 'Group'
        value: 'D3D'
        type: REG_SZ
        arch: win64


